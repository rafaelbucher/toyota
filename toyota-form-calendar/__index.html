<!DOCTYPE html>
<html lang="fr">

    <head>
        <meta charset="utf-8" />
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Calendrier d'entretien | Toyota Canada</title>
        <meta name="description" content="Planifiez l'entretien de votre véhicule Toyota avec notre calendrier personnalisé. Sélectionnez votre modèle et obtenez un programme d'entretien adapté.">
        
        <link rel="apple-touch-icon" sizes="180x180" href="https://toyotacanada.scene7.com/is/image/toyotacanada/apple-touch-icon-1"/>
        <link rel="icon" sizes="192x192" type="image/png" href="https://toyotacanada.scene7.com/is/image/toyotacanada/icon-192-1"/>
        <link rel="icon" sizes="512x512" type="image/png" href="https://toyotacanada.scene7.com/is/image/toyotacanada/icon-512-1"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
        <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
        <link rel="stylesheet" href="css/styles.css" />
        
        <style>
            /* Styles pour améliorer l'accessibilité */
            .visually-hidden {
                position: absolute !important;
                width: 1px !important;
                height: 1px !important;
                padding: 0 !important;
                margin: -1px !important;
                overflow: hidden !important;
                clip: rect(0, 0, 0, 0) !important;
                white-space: nowrap !important;
                border: 0 !important;
            }
            
            .skip-link {
                position: absolute;
                top: -40px;
                left: 6px;
                background: #000;
                color: #fff;
                padding: 8px;
                text-decoration: none;
                z-index: 1000;
            }
            
            .skip-link:focus {
                top: 6px;
            }
            
            /* Améliorer la visibilité du focus */
            button:focus, select:focus, input:focus {
                outline: 2px solid #005fcc;
                outline-offset: 2px;
            }
            
            /* Styles pour la démonstration des états de boutons */
            .button-states-demo {
                margin: 2rem 0;
                padding: 1rem;
                border: 2px dashed #ccc;
                background-color: #f9f9f9;
            }
            
            .button-state-info {
                margin-top: 0.5rem;
                font-size: 0.875rem;
            }
            
            .state-label {
                display: block;
                color: #666;
                font-style: italic;
                margin-top: 0.25rem;
            }
            
            /* Styles spécifiques pour chaque état */
            .n-button--large[disabled] {
                opacity: 0.6;
                cursor: not-allowed;
            }
            
            .n-button--loaded .n-button__loader {
                display: inline-block;
                animation: spin 1s linear infinite;
            }
            
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        </style>
    </head>

    <body>
        <!-- Lien d'évitement -->
        <a href="#main-content" class="skip-link">Aller au contenu principal</a>
        
        <header role="banner">
            <nav role="navigation" aria-label="Navigation principale">
                <!-- Navigation principale serait ici -->
            </nav>
        </header>

        <main id="main-content" role="main">
            <section class="n-section" aria-labelledby="main-heading">
                <div class="n-header n-header--center">
                    <h1 id="main-heading" class="n-headline-1 n-headline-1--highlight">Besoin d'un rendez-vous de service ?</h1>
                    <p class="n-paragraph">Quel que soit le type de Toyota que vous conduisez – essence, hybride ou électrique –, elle doit toujours faire l'objet d'un entretien régulier. Plus vous bichonnez votre Toyota, plus elle durera longtemps. Consultez votre programme d'entretien personnalisé ci-dessous et prenez votre prochain rendez-vous.</p>
                </div>
            </section>

            <section class="n-section" aria-labelledby="form-heading">
                <h2 id="form-heading" class="visually-hidden">Formulaire de sélection du véhicule</h2>
                
                <form class="n-form-toyota" novalidate>
                    <fieldset class="n-form-toyota__fieldset">
                        <legend class="visually-hidden">Informations sur le véhicule</legend>

                        <div class="n-form-toyota__control">
                            <label for="vehicle-select">
                                Véhicule
                                <abbr title="requis" aria-label="champ obligatoire">*</abbr>
                            </label>
                            <select name="vehicle" id="vehicle-select" class="n-form-select" required aria-describedby="vehicle-error">
                                <option value="">Sélectionnez un véhicule</option>
                                <option value="4Runner">4Runner</option>
                                <option value="4runner-hybrid">4Runner Hybrid</option>
                                <option value="avalon">Avalon</option>
                                <option value="c-hr">C-HR</option>
                                <option value="camry-hybride">Camry hybride</option>
                                <option value="autres">Autres modèles</option>
                            </select>
                            <span class="n-form-toyota__valid-icon" aria-hidden="true">
                                <svg width="14" height="10" viewBox="0 0 14 10" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Validation réussie">
                                    <path d="M12.237 1.16016L4.90365 8.49349L1.57031 5.16016" stroke="#4ACF98" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </span>
                            <div id="vehicle-error" class="error-message" role="alert" aria-live="polite"></div>
                        </div>

                        <div class="n-form-toyota__control">
                            <label for="year-select">
                                Année
                                <abbr title="requis" aria-label="champ obligatoire">*</abbr>
                            </label>
                            <select name="year" id="year-select" class="n-form-select" required aria-describedby="year-error">
                                <option value="">Sélectionner l'année</option>
                                <option value="2025">2025</option>
                                <option value="2024">2024</option>
                                <option value="2023">2023</option>
                                <option value="2022">2022</option>
                                <option value="2021">2021</option>
                            </select>
                            <span class="n-form-toyota__valid-icon" aria-hidden="true">
                                <svg width="14" height="10" viewBox="0 0 14 10" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Validation réussie">
                                    <path d="M12.237 1.16016L4.90365 8.49349L1.57031 5.16016" stroke="#4ACF98" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </span>
                            <div id="year-error" class="error-message" role="alert" aria-live="polite"></div>
                        </div>

                        <div class="n-form-toyota__control">
                            <label for="model-select">
                                Modèle
                                <abbr title="requis" aria-label="champ obligatoire">*</abbr>
                            </label>
                            <select name="model" id="model-select" class="n-form-select" disabled required aria-describedby="model-error model-help">
                                <option value="">Sélectionner le modèle</option>
                                <option value="4runner">4Runner</option>
                                <option value="autres">Autres modèles</option>
                            </select>
                            <div id="model-help" class="help-text">Ce champ sera activé après avoir sélectionné un véhicule et une année</div>
                            <span class="n-form-toyota__valid-icon" aria-hidden="true">
                                <svg width="14" height="10" viewBox="0 0 14 10" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Validation réussie">
                                    <path d="M12.237 1.16016L4.90365 8.49349L1.57031 5.16016" stroke="#4ACF98" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </span>
                            <div id="model-error" class="error-message" role="alert" aria-live="polite"></div>
                        </div>
                    </fieldset>

                    <fieldset class="n-form-toyota__fieldset">
                        <legend class="visually-hidden">Informations sur le kilométrage</legend>

                        <div class="n-form-toyota__control">
                            <label for="mileage-input">
                                Kilométrage du véhicule (km)
                                <abbr title="requis" aria-label="champ obligatoire">*</abbr>
                            </label>
                            <input type="number" id="mileage-input" name="mileage" placeholder="0" min="0" max="512000" class="n-form-text" required aria-describedby="mileage-error mileage-help">
                            <div id="mileage-help" class="help-text">Entrez le kilométrage actuel de votre véhicule</div>
                            <span class="n-form-toyota__valid-icon" aria-hidden="true">
                                <svg width="14" height="10" viewBox="0 0 14 10" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Validation réussie">
                                    <path d="M12.237 1.16016L4.90365 8.49349L1.57031 5.16016" stroke="#4ACF98" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </span>
                            <div id="mileage-error" class="error-message" role="alert" aria-live="polite"></div>
                        </div>

                        <div class="n-form-toyota__control">
                            <label for="average-input">Kilométrage mensuel moyen</label>
                            <input type="number" id="average-input" name="averageMileage" placeholder="0" min="0" max="512000" class="n-form-text" aria-describedby="average-help">
                            <div id="average-help" class="help-text">Kilométrage moyen que vous parcourez chaque mois</div>
                            <span class="n-form-toyota__valid-icon" aria-hidden="true">
                                <svg width="14" height="10" viewBox="0 0 14 10" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Validation réussie">
                                    <path d="M12.237 1.16016L4.90365 8.49349L1.57031 5.16016" stroke="#4ACF98" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </span>
                        </div>
                    </fieldset>

                    <!-- Démonstration des 3 états de bouton pour le client -->
                    <div class="button-states-demo" role="region" aria-labelledby="demo-heading">
                        <h2 id="demo-heading" class="visually-hidden">Démonstration des états du bouton</h2>
                        
                        <!-- État 1: Bouton désactivé -->
                        <div class="n-form-toyota__submit">
                            <button class="n-button n-button--large" type="button" disabled aria-describedby="disabled-help">
                                <span class="button-text">Afficher mon calendrier</span>
                                <span class="n-button__loader" aria-hidden="true"></span>
                            </button>
                            <div id="disabled-help" class="button-state-info" aria-live="polite">
                                <span class="visually-hidden">État : Bouton désactivé. Formulaire incomplet.</span>
                                <small class="state-label">État : Désactivé (champs obligatoires manquants)</small>
                            </div>
                        </div>

                        <!-- État 2: Bouton normal/actif -->
                        <div class="n-form-toyota__submit">
                            <button class="n-button n-button--large" type="button" aria-describedby="normal-help">
                                <span class="button-text">Afficher mon calendrier</span>
                                <span class="n-button__loader" aria-hidden="true"></span>
                            </button>
                            <div id="normal-help" class="button-state-info">
                                <span class="visually-hidden">État : Bouton actif. Prêt à soumettre le formulaire.</span>
                                <small class="state-label">État : Actif (formulaire valide)</small>
                            </div>
                        </div>

                        <!-- État 3: Bouton en cours de chargement -->
                        <div class="n-form-toyota__submit">
                            <button class="n-button n-button--large n-button--loaded" type="button" disabled aria-describedby="loading-help">
                                <span class="button-text">Chargement...</span>
                                <span class="n-button__loader" aria-hidden="false" role="status" aria-label="Traitement en cours"></span>
                            </button>
                            <div id="loading-help" class="button-state-info" aria-live="polite">
                                <span class="visually-hidden">État : Traitement en cours. Veuillez patienter.</span>
                                <small class="state-label">État : Chargement (traitement en cours)</small>
                            </div>
                        </div>
                    </div>
                </form>
            </section>

            <section class="n-section n-section--hidden n-section--my" id="results-section" aria-labelledby="results-heading" aria-live="polite">
                <div class="n-header n-header--center">
                    <h2 id="results-heading" class="n-headline-4">VOTRE PROGRAMME D'ENTRETIEN PERSONNALISÉ</h2>
                    <p class="n-paragraph">Le calendrier d'entretien recommandé ci-dessous est basé sur les renseignements sur votre véhicule.</p>
                </div>

                <div class="n-data" role="region" aria-labelledby="vehicle-info-heading">
                    <h3 id="vehicle-info-heading" class="visually-hidden">Informations sur votre véhicule</h3>
                    <dl>
                        <dt>Votre Toyota</dt>
                        <dd><strong>4Runner 2024</strong></dd>
                        <dt>Kilométrage du véhicule (km)</dt>
                        <dd><strong>102</strong> km</dd>
                        <dt>Kilométrage mensuel moyen</dt>
                        <dd><strong>1,333</strong> km/mois</dd>
                    </dl>
                </div>

                <div class="swiper n-swiper" role="region" aria-labelledby="schedule-heading">
                    <h3 id="schedule-heading" class="visually-hidden">Calendrier des services d'entretien</h3>
                    <div class="swiper-wrapper n-swiper-cards" role="list">
                        <div class="swiper-slide" role="listitem">
                            <div class="n-swiper-card">
                                <div class="n-swiper-card__content">
                                    <p>Prochain service<br><strong>24,000 km</strong></p>
                                    <p>Date de service estimée<br><strong>Décembre 2026</strong></p>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide" role="listitem">
                            <div class="n-swiper-card">
                                <div class="n-swiper-card__content">
                                    <p>Prochain service<br><strong>32,000 km</strong></p>
                                    <p>Date de service estimée<br><strong>Juin 2027</strong></p>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide" role="listitem">
                            <div class="n-swiper-card n-swiper-card--selected" aria-current="true">
                                <div class="n-swiper-card__content">
                                    <p>Service recommandé<br><strong>40,000 km</strong></p>
                                    <p>Date de service estimée<br><strong>Décembre 2027</strong></p>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide" role="listitem">
                            <div class="n-swiper-card">
                                <div class="n-swiper-card__content">
                                    <p>Prochain service<br><strong>48,000 km</strong></p>
                                    <p>Date de service estimée<br><strong>Juin 2028</strong></p>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide" role="listitem">
                            <div class="n-swiper-card">
                                <div class="n-swiper-card__content">
                                    <p>Prochain service<br><strong>56,000 km</strong></p>
                                    <p>Date de service estimée<br><strong>Décembre 2028</strong></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="swiper-button-prev" aria-label="Service précédent" type="button"></button>
                    <button class="swiper-button-next" aria-label="Service suivant" type="button"></button>
                </div>

                <div class="n-group-button">
                    <button class="n-button n-button--large" type="button">
                        Votre programme de service personnalisé
                    </button>
                    <button class="n-button n-button--large n-button-outline" type="button">
                        Télécharger le programme complet
                    </button>
                </div>
            </section>
        </main>

        <footer role="contentinfo">
            <!-- Pied de page serait ici -->
        </footer>

        <script type="module">
            // Configuration Swiper avec amélioration de l'accessibilité
            const swiper = new Swiper('.swiper', {
                direction: 'horizontal',
                loop: false, // Désactivé pour éviter la confusion avec les lecteurs d'écran
                slidesPerView: 4,
                spaceBetween: 32,
                
                // Accessibilité
                a11y: {
                    enabled: true,
                    prevSlideMessage: 'Service précédent',
                    nextSlideMessage: 'Service suivant',
                    paginationBulletMessage: 'Aller au service {{index}}'
                },
                
                // Breakpoints responsive
                breakpoints: {
                    360: {
                        slidesPerView: 1,
                        spaceBetween: 16
                    },
                    768: {
                        slidesPerView: 3,
                        spaceBetween: 24,
                    },
                    1024: {
                        slidesPerView: 4,
                        spaceBetween: 36
                    }
                },

                // Navigation
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                
                // Support clavier
                keyboard: {
                    enabled: true,
                    onlyInViewport: true,
                }
            });
            
            // Démonstration interactive des états de boutons pour le client
            const demoButtons = document.querySelectorAll('.button-states-demo button');
            
            demoButtons.forEach((button, index) => {
                button.addEventListener('click', function() {
                    const stateInfo = this.getAttribute('aria-describedby');
                    const infoElement = document.getElementById(stateInfo);
                    
                    if (infoElement) {
                        // Créer une annonce temporaire pour les lecteurs d'écran
                        const announcement = document.createElement('div');
                        announcement.setAttribute('aria-live', 'assertive');
                        announcement.className = 'visually-hidden';
                        
                        switch(index) {
                            case 0:
                                announcement.textContent = 'Démonstration : Bouton désactivé cliqué. Aucune action effectuée car le bouton est désactivé.';
                                break;
                            case 1:
                                announcement.textContent = 'Démonstration : Bouton actif cliqué. En situation réelle, le formulaire serait soumis.';
                                break;
                            case 2:
                                announcement.textContent = 'Démonstration : Bouton en chargement cliqué. Aucune action effectuée car le traitement est en cours.';
                                break;
                        }
                        
                        document.body.appendChild(announcement);
                        setTimeout(() => {
                            document.body.removeChild(announcement);
                        }, 3000);
                    }
                });
            });
            
            // Gestion de la validation du formulaire (code existant simplifié)
            const form = document.querySelector('.n-form-toyota');
            const requiredFields = form.querySelectorAll('[required]');
            
            // Validation simple pour la démonstration
            function validateForm() {
                // Code de validation simplifié pour la démonstration
                console.log('Validation du formulaire');
            }
            
            // Événements pour la démonstration
            requiredFields.forEach(field => {
                field.addEventListener('input', validateForm);
                field.addEventListener('change', validateForm);
            });
            
            // Gestion de la soumission pour la démonstration
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Afficher les résultats
                const resultsSection = document.getElementById('results-section');
                resultsSection.classList.remove('n-section--hidden');
                resultsSection.scrollIntoView({ behavior: 'smooth' });
                
                // Annoncer le changement aux lecteurs d'écran
                const announcement = document.createElement('div');
                announcement.setAttribute('aria-live', 'assertive');
                announcement.setAttribute('aria-atomic', 'true');
                announcement.className = 'visually-hidden';
                announcement.textContent = 'Votre programme d\'entretien personnalisé a été généré et affiché ci-dessous.';
                document.body.appendChild(announcement);
                
                setTimeout(() => {
                    if (document.body.contains(announcement)) {
                        document.body.removeChild(announcement);
                    }
                }, 1000);
            });
        </script>
    </body>
</html>